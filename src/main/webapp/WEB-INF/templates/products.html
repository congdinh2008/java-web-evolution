<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/main}">
<head>
    <title>Products</title>
    <th:block layout:fragment="css">
        <style>
            .flex {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 20px;
            }
            .products-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 20px;
            }
            .product-card {
                background-color: white;
                border-radius: 8px;
                padding: 15px;
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
                transition: transform 0.3s ease;
            }
            .product-card:hover {
                transform: translateY(-5px);
            }
            .product-image {
                width: 100%;
                height: 200px;
                object-fit: cover;
                border-radius: 5px;
            }
            .product-price {
                font-weight: bold;
                color: #e63946;
                font-size: 1.2em;
            }
            .stock-info {
                color: #666;
                font-size: 0.9em;
            }
            .out-of-stock {
                color: #e63946;
            }
            .in-stock {
                color: #2a9d8f;
            }
            .buttons {
                display: flex;
                justify-content: space-between;
                margin-top: 10px;
            }
            .button {
                display: inline-block;
                padding: 8px 16px;
                background-color: #3498db;
                color: white;
                text-decoration: none;
                border-radius: 4px;
                margin-top: 10px;
            }
            .button:hover {
                background-color: #2980b9;
            }
            .delete-button {
                background-color: #e74c3c;
                border: none;
                color: white;
                padding: 8px 16px;
                border-radius: 4px;
                cursor: pointer;
                font-size: 16px;
            }
            .delete-button:hover {
                background-color: #c0392b;
            }
            .edit-button {
                background-color: #f39c12;
                color: white;
                padding: 8px 16px;
                border-radius: 4px;
                text-decoration: none;
            }
            .edit-button:hover {
                background-color: #e67e22;
            }
        </style>
    </th:block>
</head>
<body>
    <div layout:fragment="content">
        <div class="flex">
            <h1>Our Products</h1>
            <a th:href="@{/products/add}" class="button">Add New Product</a>
        </div>

        <div class="products-grid">
            <div class="product-card" th:each="product : ${products}">
                <a th:href="@{/products/details(id=${product.id})}"
                   style="text-decoration: none; color: inherit;">
                    <img th:src="${product.thumbnailUrl}" th:alt="${product.name}" class="product-image">
                    <h3 th:text="${product.name}">Product Name</h3>
                    <p class="product-price" th:text="'$' + ${product.unitPrice}">$0.00</p>
                    <p class="stock-info">
                        <span class="in-stock" th:if="${product.unitInStock > 0}" 
                              th:text="'In Stock: ' + ${product.unitInStock} + ' units'">
                            In Stock: 20 units
                        </span>
                        <span class="out-of-stock" th:if="${product.unitInStock <= 0}">
                            Out of Stock
                        </span>
                    </p>
                </a>
                <div class="buttons">
                    <a th:href="@{/products/edit(id=${product.id})}" class="button edit-button">Edit</a>
                    <form method="post" th:action="@{/products/delete}">
                        <input type="hidden" name="id" th:value="${product.id}">
                        <button type="submit" class="button delete-button"
                                onclick="return confirm('Are you sure you want to delete this product?');">Delete</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
